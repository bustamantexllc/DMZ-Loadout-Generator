<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DMZ Pools Editor</title>
  <style>
    :root{
      --bg0:#070A12; --bg1:#0B1220;
      --text:#EAF1FF; --muted:#A9B7D6;
      --accent:#6BE4FF; --accent2:#9B7CFF;
      --border:rgba(255,255,255,.10);
      --shadow: 0 20px 60px rgba(0,0,0,.55);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 20% -10%, rgba(155,124,255,.25), transparent 60%),
        radial-gradient(900px 700px at 100% 20%, rgba(107,228,255,.18), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      min-height:100svh;
      padding:22px;
    }
    .wrap{max-width:1100px;margin:0 auto;display:flex;flex-direction:column;gap:14px;}
    .top{
      display:flex;align-items:flex-start;justify-content:space-between;gap:14px;
      padding:14px 16px;border:1px solid var(--border);border-radius:var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      box-shadow: var(--shadow);
    }
    h1{margin:0;font-size:18px;letter-spacing:.5px}
    p{margin:6px 0 0;color:var(--muted);font-size:13px;line-height:1.4}
    a{color:rgba(234,241,255,.92);text-decoration:none;border-bottom:1px dashed rgba(255,255,255,.25)}
    a:hover{border-bottom-color:rgba(107,228,255,.55)}
    .btnRow{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end;align-items:center}
    button{
      border:none;border-radius:16px;padding:10px 14px;font-weight:700;cursor:pointer;font-size:13px;
    }
    .primary{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#061018}
    .secondary{background:rgba(255,255,255,.05);color:var(--text);border:1px solid rgba(255,255,255,.12)}
    .card{
      border:1px solid var(--border);
      border-radius:var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .cardHeader{
      padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.08);
      display:flex;align-items:center;justify-content:space-between;gap:12px;
    }
    .cardHeader b{letter-spacing:.7px;text-transform:uppercase;color:var(--muted);font-size:13px}
    .grid{
      padding:14px 16px;
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
    }
    @media(max-width:900px){.grid{grid-template-columns:1fr}}
    .box{
      border:1px solid rgba(255,255,255,.10);
      border-radius:18px;
      background:rgba(0,0,0,.16);
      padding:12px;
    }
    .box h3{margin:0 0 8px;font-size:13px;letter-spacing:.5px;text-transform:uppercase;color:rgba(234,241,255,.92)}
    .hint{color:var(--muted);font-size:12px;margin:0 0 10px;line-height:1.35}
    textarea{
      width:100%;
      min-height:190px;
      resize:vertical;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.03);
      color:rgba(234,241,255,.92);
      padding:10px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size:12px;
      line-height:1.4;
    }
    .toast{
      position: fixed;
      bottom: 18px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(10,16,28,.92);
      border: 1px solid rgba(255,255,255,.12);
      color: rgba(234,241,255,.95);
      padding: 10px 12px;
      border-radius: 14px;
      box-shadow: var(--shadow);
      opacity:0;
      pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
      font-size: 13px;
      z-index: 99;
    }
    .toast.show{opacity:1; transform: translateX(-50%) translateY(-6px);}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div>
        <h1>DMZ Pools Editor</h1>
        <p>
          Edit every pool here (one item per line). Saved to your browser automatically and used by <a href="index.html">index.html</a>.<br>
          If you ever want to reset everything, click “Reset to Default”.
        </p>
      </div>
      <div class="btnRow">
        <button class="secondary" id="copyJson">Copy JSON</button>
        <button class="secondary" id="reset">Reset to Default</button>
        <button class="primary" id="save">Save</button>
      </div>
    </div>

    <div class="card">
      <div class="cardHeader">
        <b>Pools</b>
        <div style="color:var(--muted);font-size:12px;">One item per line • blanks ignored • duplicates removed</div>
      </div>
      <div class="grid" id="grid"></div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

<script>
const STORAGE_KEY = "dmz_pools_v1";

const DEFAULT_POOLS = {
  ALL_WEAPONS: [
    "M4","TAQ-56","Kastov 762","Lachmann-556","STB 556","M16","Kastov-74u","Kastov 545",
    "M13B","Chimera","ISO Hemlock","Tempus Razorback","FR Avancer","M13C","TR-76 Geist",
    "Lachmann-762","SO-14","TAQ-V","FTAC Recon","Cronen Squall",
    "VEL 46","MX9","Lachmann Sub","Vaznev-9K","FSS Hurricane","Minibak","PDSW 528","Fennec 45","BAS-P",
    "ISO 45","Lachmann Shroud",
    "SAKIN MG38","HCR 56","556 Icarus","RAAL MG","RPK","RAPP H",
    "Lockwood 300","Expedite 12","Bryson 800","Bryson 890","KV Broadside","MX Guardian",
    "EBR-14","SP-R 208","Lockwood MK2","LM-S","SA-B 50","TAQ-M","Crossbow","Tempus Torrent",
    "MCPR-300","Signal 50","LA-B 330","SP-X 80","Victus XMR","FJX Imperium","Carrack .300",
    "P890",".50 GS","X12","Basilisk","X13 Auto","GS Magna","FTac Siege","9mm Daemon",
    "RPG-7","PILA","JOKR","Strela-P",
    "Riot Shield","Combat Knife","Dual Kodachis","Tonfa","Pickaxe","Dual Kamas"
  ],
  TACTICAL: [
    "Flash Grenade","Stun Grenade","Smoke Grenade","Snapshot Grenade","Tear Gas",
    "Stim","Decoy Grenade","Heartbeat Sensor","Shock Stick","Spotter Scope"
  ],
  LETHAL: [
    "Frag Grenade","Semtex","Drill Charge","Molotov Cocktail","Throwing Knife",
    "Proximity Mine","Thermite","C4","Claymore"
  ],
  FIELD_UPGRADE: [
    "Munitions Box","Armor Box","Trophy System","Dead Silence","Recon Drone"
  ],
  VEST: [
    "2-Plate Vest","3-Plate Vest","3-Plate Comms Vest","3-Plate Medic Vest","3-Plate Stealth Vest"
  ],
  BACKPACK: ["Small Backpack","Medium Backpack","Large Backpack"],
  REVIVE: ["Self-Revive Kit","Revive Pistol"],
  MASK: ["Gas Mask","Durable Gas Mask","Radiation Blocker"]
};

const toast = document.getElementById("toast");
function showToast(msg){
  toast.textContent = msg;
  toast.classList.add("show");
  setTimeout(()=>toast.classList.remove("show"), 1200);
}

function normalizeList(text){
  return Array.from(new Set(
    text.split("\n")
      .map(x=>x.trim())
      .filter(Boolean)
  ));
}

function loadPools(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    if(!raw) return structuredClone(DEFAULT_POOLS);
    const parsed = JSON.parse(raw);
    return { ...structuredClone(DEFAULT_POOLS), ...parsed };
  }catch{
    return structuredClone(DEFAULT_POOLS);
  }
}

function savePools(pools){
  // Ensure arrays + de-dupe
  for(const k of Object.keys(pools)){
    if(!Array.isArray(pools[k])) pools[k] = [];
    pools[k] = Array.from(new Set(pools[k].map(x=>String(x).trim()).filter(Boolean)));
  }
  localStorage.setItem(STORAGE_KEY, JSON.stringify(pools, null, 2));
}

const fields = [
  ["ALL_WEAPONS","All Weapons (Primary + Secondary)","Every single weapon should be possible (AR/SMG/LMG/BR/Marksman/Sniper/Pistols/Launchers/Melee/Shield). One per line."],
  ["TACTICAL","Tactical","One per line."],
  ["LETHAL","Lethal","One per line."],
  ["FIELD_UPGRADE","Field Upgrade","One per line."],
  ["VEST","Vest (Regain extra slot)","One per line."],
  ["BACKPACK","Backpack (Regain extra slot)","One per line."],
  ["REVIVE","Revive (Regain extra slot)","One per line."],
  ["MASK","Mask (Regain extra slot)","One per line."]
];

const grid = document.getElementById("grid");
let current = loadPools();

function render(){
  grid.innerHTML = "";
  fields.forEach(([key,title,hint])=>{
    const box = document.createElement("div");
    box.className = "box";
    box.innerHTML = `
      <h3>${title}</h3>
      <div class="hint">${hint}</div>
      <textarea id="ta_${key}" spellcheck="false"></textarea>
    `;
    grid.appendChild(box);

    const ta = box.querySelector("textarea");
    ta.value = (current[key] ?? []).join("\n");
  });
}

document.getElementById("save").addEventListener("click", ()=>{
  const next = {};
  fields.forEach(([key])=>{
    const ta = document.getElementById("ta_" + key);
    next[key] = normalizeList(ta.value || "");
  });
  current = { ...structuredClone(DEFAULT_POOLS), ...next };
  savePools(current);
  showToast("Saved");
});

document.getElementById("reset").addEventListener("click", ()=>{
  current = structuredClone(DEFAULT_POOLS);
  savePools(current);
  render();
  showToast("Reset");
});

document.getElementById("copyJson").addEventListener("click", async ()=>{
  const raw = localStorage.getItem(STORAGE_KEY) || JSON.stringify(current, null, 2);
  try{
    await navigator.clipboard.writeText(raw);
    showToast("Copied JSON");
  }catch{
    const ta = document.createElement("textarea");
    ta.value = raw;
    document.body.appendChild(ta);
    ta.select();
    document.execCommand("copy");
    ta.remove();
    showToast("Copied JSON");
  }
});

render();
</script>
</body>
</html>
